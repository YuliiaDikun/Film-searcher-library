{"mappings":"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","sources":["src/js/library.js","src/templates/filmLibraryCard.hbs"],"sourcesContent":["import Notiflix from 'notiflix';\nimport FilmApi from './movieAPI';\nimport filmCard from '../templates/modal-film.hbs';\nimport fixObject from './fixObject';\nimport { setLocalStorage, getLocalStorage } from './localStorage';\nimport filmLibraryCard from '../templates/filmLibraryCard.hbs';\nimport setFilmToLocalStorage from './setFilmToLocalStorage';\nimport './theme';\nimport './topBtn';\n\nconst watchedLibraryBtn = document.querySelector('[data-watched]');\nconst queueLibraryBtn = document.querySelector('[data-queue]');\nconst ulEl = document.querySelector('.films');\n\nconst LOCAL_WATCHED = 'watchedList';\nconst LOCAL_QUEUE = 'queueList';\nconst LOCAL_LIST = 'selectedList';\n\nwatchedLibraryBtn.addEventListener('click', onWatchedLibrary);\nqueueLibraryBtn.addEventListener('click', onQueueLibrary);\nulEl.addEventListener('click', onUlElClick);\n\nconst filmAPIByID = new FilmApi();\n\nfunction onWatchedLibrary() {\n  queueLibraryBtn.classList.remove('is-active');\n  watchedLibraryBtn.classList.add('is-active');\n\n  createFilmList(LOCAL_WATCHED);\n  setLocalStorage(LOCAL_LIST, 'watched');\n}\n\nfunction onQueueLibrary() {\n  watchedLibraryBtn.classList.remove('is-active');\n  queueLibraryBtn.classList.add('is-active');\n\n  createFilmList(LOCAL_QUEUE);\n  setLocalStorage(LOCAL_LIST, 'queue');\n}\n\nasync function onUlElClick(e) {\n  try {\n    if (e.target.nodeName === 'UL') {\n      return;\n    }\n    const selectedList = getLocalStorage(LOCAL_LIST);\n\n    const item = e.target.closest('li');\n\n    let id = item.dataset.id;\n\n    filmAPIByID.idFilm = id;\n    const film = await filmAPIByID.getFilmByID();\n\n    const fixedFilm = fixObject(film);\n    const filmMarkUp = filmCard(fixedFilm);\n\n    document.querySelector('body').insertAdjacentHTML('beforeend', filmMarkUp);\n    let modal = document.querySelector('.modal-backdrop');\n    let watchedBtn = document.querySelector('[data-name=\"watched\"]');\n    let queueBtn = document.querySelector('[data-name=\"queue\"]');\n    watchedBtn.textContent = 'REMOVE';\n    if (selectedList === 'queue') {\n      queueBtn.textContent = 'ADD TO WATCHED';\n    }\n    const onClose = event => {\n      if (event.code === 'Escape') {\n        modal.remove();\n        document.removeEventListener('keydown', onClose);\n      }\n    };\n    const onModalFilmClick = event => {\n      if (event.target.nodeName === 'path' || event.target.nodeName === 'svg') {\n        modal.remove();\n        document.removeEventListener('keydown', onClose);\n      }\n      if (event.target === event.currentTarget) {\n        modal.remove();\n        document.removeEventListener('keydown', onClose);\n      }\n    };\n    const onWatchedBtn = event => {\n      if (selectedList === 'watched') {\n        removeFromLocal(LOCAL_WATCHED, id, item, modal);\n      } else {\n        removeFromLocal(LOCAL_QUEUE, id, item, modal);\n      }\n    };\n    const onQueueBtn = event => {\n      if (selectedList === 'queue') {\n        setFilmToLocalStorage(LOCAL_WATCHED, id, fixedFilm, onClose);\n        removeFromLocal(LOCAL_QUEUE, id, item, modal);\n      } else {\n        setFilmToLocalStorage(LOCAL_QUEUE, id, fixedFilm, onClose);\n        removeFromLocal(LOCAL_WATCHED, id, item, modal);\n      }\n    };\n    modal.addEventListener('click', onModalFilmClick);\n    document.addEventListener('keydown', onClose);\n    watchedBtn.addEventListener('click', onWatchedBtn);\n    queueBtn.addEventListener('click', onQueueBtn);\n  } catch (error) {\n    Notiflix.Notify.failure(error.message);\n  }\n}\n\nfunction removeFromLocal(localKey, filmId, li, modal, onClose) {\n  const watchedArray = getLocalStorage(localKey);\n  const index = watchedArray.findIndex(film => film.id === Number(filmId));\n  watchedArray.splice(index, 1);\n  setLocalStorage(localKey, watchedArray);\n  li.remove();\n  modal.remove();\n  document.removeEventListener('keydown', onClose);\n}\n\nfunction createFilmList(localKey) {\n  ulEl.innerHTML = '';\n  const arrayOfWatchedFilms = getLocalStorage(localKey);\n  if (!arrayOfWatchedFilms.length) {\n    Notiflix.Notify.failure('The list is empty.');\n  }\n  const watchedMarkUp = arrayOfWatchedFilms\n    .map(film => filmLibraryCard(film))\n    .join('');\n  ulEl.insertAdjacentHTML('beforeend', watchedMarkUp);\n}\n","<li class='films__item' data-id={{id}}>\n    <div class='films__img'>\n        <img src='https://image.tmdb.org/t/p/w500{{poster_path}}' alt={{original_title}} loading='lazy' />\n    </div>\n    <div class='films__description'>\n        <p class='films__name'>{{title}}</p>\n        <div class=\"films__container\">\n            <p class='films__info'>{{genres}} | {{release_date}}</p>\n            <span class='films__rating'>{{vote_average}}</span>\n        </div>      \n    </div>\n</li>"],"names":["$bpxeT","parcelRequire","$l5bVx","$2523f6b7b77ece1d$export$2e2bcd8739ae039","$parcel$interopDefault","template","compiler","main","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","name","hash","loc","start","line","column","end","useData","$93effc6fc56091ad$var$watchedLibraryBtn","document","querySelector","$93effc6fc56091ad$var$queueLibraryBtn","$93effc6fc56091ad$var$ulEl","$93effc6fc56091ad$var$LOCAL_WATCHED","$93effc6fc56091ad$var$LOCAL_QUEUE","$93effc6fc56091ad$var$LOCAL_LIST","addEventListener","classList","remove","add","$93effc6fc56091ad$var$createFilmList","$UL92Z","setLocalStorage","e","$93effc6fc56091ad$var$_onUlElClick","apply","this","arguments","$93effc6fc56091ad$var$filmAPIByID","$lHIzZ","default","$2TvXO","mark","_callee","selectedList","item","id","film","fixedFilm","filmMarkUp","modal","watchedBtn","queueBtn","onClose","onModalFilmClick","onWatchedBtn","onQueueBtn","target","nodeName","getLocalStorage","closest","dataset","idFilm","getFilmByID","_ctx","sent","$pWSgs","$2eIIo","insertAdjacentHTML","textContent","event","code","removeEventListener","currentTarget","$93effc6fc56091ad$var$removeFromLocal","$bGg9a","$iU1Pc","Notify","failure","t0","message","localKey","filmId","li","watchedArray","index","findIndex","Number","splice","innerHTML","arrayOfWatchedFilms","length","watchedMarkUp","map","join"],"version":3,"file":"library.410ac78e.js.map"}