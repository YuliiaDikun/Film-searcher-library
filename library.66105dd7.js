!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequireb280;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},t.parcelRequireb280=i);var r=i("bpxeT"),l=i("2TvXO"),o=i("iU1Pc"),s=i("lHIzZ"),c=i("2eIIo"),u=i("pWSgs"),d=i("UL92Z"),f=i("l5bVx"),m=e(i("WMajR")).template({compiler:[8,">= 4.3.0"],main:function(t,n,a,i,r){var l,o=null!=n?n:t.nullContext||{},s=t.hooks.helperMissing,c="function",u=t.escapeExpression,d=t.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<li class='films__item' data-id="+u((void 0===(l=null!=(l=d(a,"id")||(null!=n?d(n,"id"):n))?l:s)?"undefined":e(f)(l))===c?l.call(o,{name:"id",hash:{},data:r,loc:{start:{line:1,column:32},end:{line:1,column:38}}}):l)+">\n    <div class='films__img'>\n        <img src='https://image.tmdb.org/t/p/w500"+u((void 0===(l=null!=(l=d(a,"poster_path")||(null!=n?d(n,"poster_path"):n))?l:s)?"undefined":e(f)(l))===c?l.call(o,{name:"poster_path",hash:{},data:r,loc:{start:{line:3,column:49},end:{line:3,column:64}}}):l)+"' alt="+u((void 0===(l=null!=(l=d(a,"original_title")||(null!=n?d(n,"original_title"):n))?l:s)?"undefined":e(f)(l))===c?l.call(o,{name:"original_title",hash:{},data:r,loc:{start:{line:3,column:70},end:{line:3,column:88}}}):l)+" loading='lazy' />\n    </div>\n    <div class='films__description'>\n        <p class='films__name'>"+u((void 0===(l=null!=(l=d(a,"title")||(null!=n?d(n,"title"):n))?l:s)?"undefined":e(f)(l))===c?l.call(o,{name:"title",hash:{},data:r,loc:{start:{line:6,column:31},end:{line:6,column:40}}}):l)+"</p>\n        <div class=\"films__container\">\n            <p class='films__info'>"+u((void 0===(l=null!=(l=d(a,"genres")||(null!=n?d(n,"genres"):n))?l:s)?"undefined":e(f)(l))===c?l.call(o,{name:"genres",hash:{},data:r,loc:{start:{line:8,column:35},end:{line:8,column:45}}}):l)+" | "+u((void 0===(l=null!=(l=d(a,"release_date")||(null!=n?d(n,"release_date"):n))?l:s)?"undefined":e(f)(l))===c?l.call(o,{name:"release_date",hash:{},data:r,loc:{start:{line:8,column:48},end:{line:8,column:64}}}):l)+"</p>\n            <span class='films__rating'>"+u((void 0===(l=null!=(l=d(a,"vote_average")||(null!=n?d(n,"vote_average"):n))?l:s)?"undefined":e(f)(l))===c?l.call(o,{name:"vote_average",hash:{},data:r,loc:{start:{line:9,column:40},end:{line:9,column:56}}}):l)+"</span>\n        </div>      \n    </div>\n</li>"},useData:!0}),v=i("bGg9a"),p=(0,(d=i("UL92Z")).getLocalStorage)("favouriteMovies"),h=Object.values(p);function g(){var e={};h.forEach((function(t){e[t.id]?e[t.id]=e[t.id]+1:e[t.id]=1}));var t=Object.entries(e).sort((function(e,t){return t[1]-e[1]})),n=[];return t.forEach((function(e){return n.push(Number(e[0]))})),n.slice(0,3).join(", ")}var L=i("j1lrD"),y=i("6ulZ4");i("jcFG7");var _=i("5hsTI");i("9VC5X"),i("hPab3");var b=document.querySelector("[data-watched]"),w=document.querySelector("[data-queue]"),x=document.querySelector("[data-fav]"),k=document.querySelector(".recom"),S=document.querySelector(".films"),E=document.querySelector("#js-film-modal"),T="watchedList",q="queueList",M="selectedList";b.addEventListener("click",(function(){w.classList.remove("is-active"),x.classList.remove("is-active"),b.classList.add("is-active"),H(T),(0,d.setLocalStorage)(M,"watched")})),w.addEventListener("click",(function(){b.classList.remove("is-active"),x.classList.remove("is-active"),w.classList.add("is-active"),H(q),(0,d.setLocalStorage)(M,"queue")})),x.addEventListener("click",(function(){return j.apply(this,arguments)})),S.addEventListener("click",(function(e){return O.apply(this,arguments)}));var N=new(0,s.default);function j(){return(j=e(r)(e(l).mark((function t(){var n,a,i,r,s;return e(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(0,d.setLocalStorage)(M,"fav"),S.innerHTML="",b.classList.remove("is-active"),w.classList.remove("is-active"),x.classList.add("is-active"),(n=g()).length){t.next=10;break}return e(o).Notify.failure("We don't have any recomendations for you :("),t.abrupt("return");case 10:return k.classList.remove("visually-hidden"),(0,L.spinnerPlay)(),t.next=14,N.getFavMovies(n);case 14:return a=t.sent,i=a.results,a.total_results,t.next=19,(0,y.default)(i);case 19:r=t.sent,s=(0,_.createMarkUp)(r),S.insertAdjacentHTML("beforeend",s),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(0),e(o).Notify.failure(t.t0.message);case 27:return t.prev=27,(0,L.spinnerStop)(),t.finish(27);case 30:case"end":return t.stop()}}),t,null,[[0,24,27,30]])})))).apply(this,arguments)}function O(){return(O=e(r)(e(l).mark((function t(n){var a,i,r,s,f,m,p,h,g,L,y,_,b,w,x,k,S,j,O,H;return e(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p=function(e){return e.map((function(e){return e})).find((function(e){return e.name.includes("Trailer")||e.name}))},g=function(t){if(t)return"https://www.youtube.com/embed/".concat(t.key);e(o).Notify.failure("Oops! Trailer did not find...")},x=function(){y.movie||(b.disabled=!0)},k=function(){w.classList.toggle("trailer__youtube")},t.prev=4,"UL"!==n.target.nodeName){t.next=7;break}return t.abrupt("return");case 7:return a=(0,d.getLocalStorage)(M),i=n.target.closest("li"),r=i.dataset.id,N.idFilm=r,t.next=13,N.getFilmByID();case 13:return s=t.sent,t.next=16,N.getTrailerById();case 16:f=t.sent,m=f.results,h=p(m),L=g(h),(y=(0,u.default)(s)).movie=L,_=(0,c.default)(y),E.innerHTML=_,E.classList.remove("is-hidden"),b=document.querySelector(".trailerShow"),w=document.querySelector(".hidden"),b.addEventListener("click",k),x(),S=document.querySelector('[data-name="watched"]'),j=document.querySelector('[data-name="queue"]'),S.textContent="REMOVE","queue"===a&&(j.textContent="ADD TO WATCHED"),O=function(e){D("watched"===a?T:q,r,i)},H=function(e){"queue"===a?((0,v.default)(T,r,y),D(q,r,i)):((0,v.default)(q,r,y),D(T,r,i))},E.addEventListener("click",C),document.addEventListener("keydown",U),S.addEventListener("click",O),j.addEventListener("click",H),t.next=48;break;case 45:t.prev=45,t.t0=t.catch(4),e(o).Notify.failure(t.t0.message);case 48:case"end":return t.stop()}}),t,null,[[4,45]])})))).apply(this,arguments)}function D(e,t,n){var a=(0,d.getLocalStorage)(e),i=a.findIndex((function(e){return e.id===Number(t)}));a.splice(i,1),(0,d.setLocalStorage)(e,a),I(),n.remove()}function H(t){S.innerHTML="";var n=(0,d.getLocalStorage)(t);n.length||e(o).Notify.failure("The list is empty.");var a=n.map((function(e){return m(e)})).join("");S.insertAdjacentHTML("beforeend",a)}function I(){E.innerHTML="",E.classList.add("is-hidden"),document.removeEventListener("keydown",U),E.removeEventListener("click",C)}function U(e){"Escape"===e.code&&I()}function C(e){"path"!==e.target.nodeName&&"svg"!==e.target.nodeName||I(),e.target===e.currentTarget&&I()}}();
//# sourceMappingURL=library.66105dd7.js.map
