function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},a=t.parcelRequire216a;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){i[e]=t},t.parcelRequire216a=a);var r=a("eWCmQ"),o=a("9Bkxl"),s=a("eXQeU"),d=a("6Jpgb"),l=a("31u3U"),c=a("2ST4D");const u=document.querySelector(".films"),f=document.querySelector("#js-film-modal");let m=(0,l.getLocalStorage)("favouriteMovies");u.addEventListener("click",(async function(t){try{if("UL"===t.target.nodeName)return;const u=t.target.closest("li").dataset.id;g.idFilm=u;const v=await g.getFilmByID();let y=v.genres;if("svg"===t.target.nodeName||"path"===t.target.nodeName){let L=t.target.closest("svg");L.classList.toggle("active");let p=Object.keys(m);L.classList.contains("active")&&!p.includes(u)&&(y.forEach((e=>m[u]=e)),(0,l.setLocalStorage)("favouriteMovies",m))}else{let w=(await g.getTrailerById()).results;const h=function(t){if(t)return`https://www.youtube.com/embed/${t.key}`;e(r).Notify.failure("Oops! Trailer did not find...")}(w.map((e=>e)).find((e=>e.name.includes("Trailer")||e.name))),E=(0,d.default)(v);E.movie=h;const T=(0,s.default)(E);f.innerHTML=T;let k=document.querySelector(".trailerShow"),N=document.querySelector(".hidden");function n(){E.movie||e(r).Notify.failure("Trailer did not find"),N.classList.toggle("trailer__youtube")}function i(){f.innerHTML="",f.classList.add("is-hidden"),document.removeEventListener("keydown",a),f.removeEventListener("click",o),k.removeEventListener("click",n)}function a(e){"Escape"===e.code&&i()}function o(e){"path"!==e.target.nodeName&&"svg"!==e.target.nodeName||i(),e.target===e.currentTarget&&i(),"watched"===e.target.dataset.name&&(0,c.default)("watchedList",u,E),"queue"===e.target.dataset.name&&(0,c.default)("queueList",u,E)}f.classList.remove("is-hidden"),f.addEventListener("click",o),document.addEventListener("keydown",a),k.addEventListener("click",n)}}catch(b){e(r).Notify.failure(b.message)}}));const g=new(0,o.default);
//# sourceMappingURL=index.a050c954.js.map
