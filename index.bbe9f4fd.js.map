{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,8EAOMC,EAAOC,SAASC,cAAc,UAC9BC,EAAgB,cAChBC,EAAc,YAEpBJ,EAAKK,iBAAiB,S,SAIUC,G,OAAjBC,EAAgBC,MAAAC,KAAAC,U,IAF/B,IAAMC,EAAc,IAAI,EAAAC,EAAAC,S,SAETN,I,OAAAA,EAAfO,EAAAhB,EAAA,CAAAgB,EAAAC,GAAAC,MAAA,SAAAC,EAAgCX,G,IAKtBY,EAEFC,EAGEC,EAEAC,EACAC,EAIFC,EAEEC,EAOAC,E,8EAxBsB,OAAxBnB,EAAIoB,OAAOC,SAAiB,C,uDAG1BT,EAAOZ,EAAIoB,OAAOE,QAAQ,MAE5BT,EAAKD,EAAKW,QAAQV,GAEtBR,EAAYmB,OAASX,E,SACFR,EAAYoB,c,OAAzBX,EAAIY,EAAAC,KAEJZ,GAAY,EAAAa,EAAArB,SAAUO,GACtBE,GAAa,EAAAa,EAAAtB,SAASQ,GAE5BpB,SAASC,cAAc,QAAQkC,mBAAmB,YAAad,GAE3DC,EAAQtB,SAASC,cAAc,mBAE7BsB,EAAU,SAAAa,GACK,WAAfA,EAAMC,OACRf,EAAMgB,SACNtC,SAASuC,oBAAoB,UAAWhB,G,EAItCC,EAAmB,SAAAY,GACO,SAA1BA,EAAMX,OAAOC,UAAiD,QAA1BU,EAAMX,OAAOC,WACnDJ,EAAMgB,SACNtC,SAASuC,oBAAoB,UAAWhB,IAEtCa,EAAMX,SAAWW,EAAMI,gBACzBlB,EAAMgB,SACNtC,SAASuC,oBAAoB,UAAWhB,IAGR,YAA9Ba,EAAMX,OAAOG,QAAQa,OACvB,EAAAC,EAAA9B,SAAsBV,EAAegB,EAAIE,GAET,UAA9BgB,EAAMX,OAAOG,QAAQa,OACvB,EAAAC,EAAA9B,SAAsBT,EAAae,EAAIE,E,EAG3CE,EAAMlB,iBAAiB,QAASoB,GAChCxB,SAASI,iBAAiB,UAAWmB,G,kDAErCV,EAAA8B,GAASC,OAAOC,QAAQd,EAAAe,GAAMC,S,2DA9CHxC,MAAAC,KAAAC,U","sources":["src/js/modal-open.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport FilmApi from './movieAPI';\nimport filmCard from '../templates/modal-film.hbs';\nimport fixObject from './fixObject';\n\nimport setFilmToLocalStorage from './setFilmToLocalStorage';\n\nconst ulEl = document.querySelector('.films');\nconst LOCAL_WATCHED = 'watchedList';\nconst LOCAL_QUEUE = 'queueList';\n\nulEl.addEventListener('click', onFimlsListClick);\n\nconst filmAPIByID = new FilmApi();\n\nasync function onFimlsListClick(evt) {\n  try {\n    if (evt.target.nodeName === 'UL') {\n      return;\n    }\n    const item = evt.target.closest('li');\n\n    let id = item.dataset.id;\n\n    filmAPIByID.idFilm = id;\n    const film = await filmAPIByID.getFilmByID();\n\n    const fixedFilm = fixObject(film);\n    const filmMarkUp = filmCard(fixedFilm);\n\n    document.querySelector('body').insertAdjacentHTML('beforeend', filmMarkUp);\n\n    let modal = document.querySelector('.modal-backdrop');\n\n    const onClose = event => {\n      if (event.code === 'Escape') {\n        modal.remove();\n        document.removeEventListener('keydown', onClose);\n      }\n    };\n\n    const onModalFilmClick = event => {\n      if (event.target.nodeName === 'path' || event.target.nodeName === 'svg') {\n        modal.remove();\n        document.removeEventListener('keydown', onClose);\n      }\n      if (event.target === event.currentTarget) {\n        modal.remove();\n        document.removeEventListener('keydown', onClose);\n      }\n\n      if (event.target.dataset.name === 'watched') {\n        setFilmToLocalStorage(LOCAL_WATCHED, id, fixedFilm);\n      }\n      if (event.target.dataset.name === 'queue') {\n        setFilmToLocalStorage(LOCAL_QUEUE, id, fixedFilm);\n      }\n    };\n    modal.addEventListener('click', onModalFilmClick);\n    document.addEventListener('keydown', onClose);\n  } catch (error) {\n    Notiflix.Notify.failure(error.message);\n  }\n}\n"],"names":["$bpxeT","parcelRequire","$11a1cf5bd10bfbe0$var$ulEl","document","querySelector","$11a1cf5bd10bfbe0$var$LOCAL_WATCHED","$11a1cf5bd10bfbe0$var$LOCAL_QUEUE","addEventListener","evt","$11a1cf5bd10bfbe0$var$_onFimlsListClick","apply","this","arguments","$11a1cf5bd10bfbe0$var$filmAPIByID","$lHIzZ","default","$parcel$interopDefault","$2TvXO","mark","_callee","item","id","film","fixedFilm","filmMarkUp","modal","onClose","onModalFilmClick","target","nodeName","closest","dataset","idFilm","getFilmByID","_ctx","sent","$pWSgs","$2eIIo","insertAdjacentHTML","event","code","remove","removeEventListener","currentTarget","name","$bGg9a","$iU1Pc","Notify","failure","t0","message"],"version":3,"file":"index.bbe9f4fd.js.map"}