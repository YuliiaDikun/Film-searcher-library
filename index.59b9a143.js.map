{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,oDAOA,MAAMC,EAAOC,SAASC,cAAc,UAIpCF,EAAKG,iBAAiB,SAItBC,eAAgCC,GAC9B,IACE,GAA4B,OAAxBA,EAAIC,OAAOC,SACb,OAIF,IAAIC,EAFSH,EAAIC,OAAOG,QAAQ,MAElBC,QAAQF,GAEtBG,EAAYC,OAASJ,EACrB,MAAMK,QAAaF,EAAYG,cAEzBC,GAAY,EAAAC,EAAAC,SAAUJ,GACtBK,GAAa,EAAAC,EAAAF,SAASF,GAE5Bd,SAASC,cAAc,QAAQkB,mBAAmB,YAAaF,GAE/D,IAAIG,EAAQpB,SAASC,cAAc,mBAEnC,MAAMoB,EAAUC,IACK,WAAfA,EAAMC,OACRH,EAAMI,SACNxB,SAASyB,oBAAoB,UAAWJ,G,EAItCK,EAAmBJ,IACO,SAA1BA,EAAMjB,OAAOC,UAAiD,QAA1BgB,EAAMjB,OAAOC,WACnDc,EAAMI,SACNxB,SAASyB,oBAAoB,UAAWJ,IAEtCC,EAAMjB,SAAWiB,EAAMK,gBACzBP,EAAMI,SACNxB,SAASyB,oBAAoB,UAAWJ,IAGR,YAA9BC,EAAMjB,OAAOI,QAAQmB,OACvB,EAAAC,EAAAb,SA5Cc,cA4CuBT,EAAIO,GAET,UAA9BQ,EAAMjB,OAAOI,QAAQmB,OACvB,EAAAC,EAAAb,SA9CY,YA8CuBT,EAAIO,EAAU,EAGrDM,EAAMlB,iBAAiB,QAASwB,GAChC1B,SAASE,iBAAiB,UAAWmB,E,CACrC,MAAOS,GACPC,EAAAlC,GAASmC,OAAOC,QAAQH,EAAMI,Q,KAhDlC,MAAMxB,EAAc,IAAI,EAAAyB,EAAAnB","sources":["src/js/modal-open.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport FilmApi from './movieAPI';\nimport filmCard from '../templates/modal-film.hbs';\nimport fixObject from './fixObject';\n\nimport setFilmToLocalStorage from './setFilmToLocalStorage';\n\nconst ulEl = document.querySelector('.films');\nconst LOCAL_WATCHED = 'watchedList';\nconst LOCAL_QUEUE = 'queueList';\n\nulEl.addEventListener('click', onFimlsListClick);\n\nconst filmAPIByID = new FilmApi();\n\nasync function onFimlsListClick(evt) {\n  try {\n    if (evt.target.nodeName === 'UL') {\n      return;\n    }\n    const item = evt.target.closest('li');\n\n    let id = item.dataset.id;\n\n    filmAPIByID.idFilm = id;\n    const film = await filmAPIByID.getFilmByID();\n\n    const fixedFilm = fixObject(film);\n    const filmMarkUp = filmCard(fixedFilm);\n\n    document.querySelector('body').insertAdjacentHTML('beforeend', filmMarkUp);\n\n    let modal = document.querySelector('.modal-backdrop');\n\n    const onClose = event => {\n      if (event.code === 'Escape') {\n        modal.remove();\n        document.removeEventListener('keydown', onClose);\n      }\n    };\n\n    const onModalFilmClick = event => {\n      if (event.target.nodeName === 'path' || event.target.nodeName === 'svg') {\n        modal.remove();\n        document.removeEventListener('keydown', onClose);\n      }\n      if (event.target === event.currentTarget) {\n        modal.remove();\n        document.removeEventListener('keydown', onClose);\n      }\n\n      if (event.target.dataset.name === 'watched') {\n        setFilmToLocalStorage(LOCAL_WATCHED, id, fixedFilm);\n      }\n      if (event.target.dataset.name === 'queue') {\n        setFilmToLocalStorage(LOCAL_QUEUE, id, fixedFilm);\n      }\n    };\n    modal.addEventListener('click', onModalFilmClick);\n    document.addEventListener('keydown', onClose);\n  } catch (error) {\n    Notiflix.Notify.failure(error.message);\n  }\n}\n"],"names":["$eWCmQ","parcelRequire","$ad3b8deda21ee6ba$var$ulEl","document","querySelector","addEventListener","async","evt","target","nodeName","id","closest","dataset","$ad3b8deda21ee6ba$var$filmAPIByID","idFilm","film","getFilmByID","fixedFilm","$6Jpgb","default","filmMarkUp","$eXQeU","insertAdjacentHTML","modal","onClose","event","code","remove","removeEventListener","onModalFilmClick","currentTarget","name","$2ST4D","error","$parcel$interopDefault","Notify","failure","message","$9Bkxl"],"version":3,"file":"index.59b9a143.js.map"}