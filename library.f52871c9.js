function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequireb280;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){a[e]=t},t.parcelRequireb280=i);var l=i("eWCmQ"),s=i("9Bkxl"),o=i("eXQeU"),c=i("6Jpgb"),r=i("31u3U");var d=e(i("amrNH")).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,c="function",r=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<li class='films__item' data-id="+r(typeof(l=null!=(l=d(n,"id")||(null!=t?d(t,"id"):t))?l:o)===c?l.call(s,{name:"id",hash:{},data:i,loc:{start:{line:1,column:32},end:{line:1,column:38}}}):l)+">\n    <div class='films__img'>\n        <img src='https://image.tmdb.org/t/p/w500"+r(typeof(l=null!=(l=d(n,"poster_path")||(null!=t?d(t,"poster_path"):t))?l:o)===c?l.call(s,{name:"poster_path",hash:{},data:i,loc:{start:{line:3,column:49},end:{line:3,column:64}}}):l)+"' alt="+r(typeof(l=null!=(l=d(n,"original_title")||(null!=t?d(t,"original_title"):t))?l:o)===c?l.call(s,{name:"original_title",hash:{},data:i,loc:{start:{line:3,column:70},end:{line:3,column:88}}}):l)+" loading='lazy' />\n    </div>\n    <div class='films__description'>\n        <p class='films__name'>"+r(typeof(l=null!=(l=d(n,"title")||(null!=t?d(t,"title"):t))?l:o)===c?l.call(s,{name:"title",hash:{},data:i,loc:{start:{line:6,column:31},end:{line:6,column:40}}}):l)+"</p>\n        <div class=\"films__container\">\n            <p class='films__info'>"+r(typeof(l=null!=(l=d(n,"genres")||(null!=t?d(t,"genres"):t))?l:o)===c?l.call(s,{name:"genres",hash:{},data:i,loc:{start:{line:8,column:35},end:{line:8,column:45}}}):l)+" | "+r(typeof(l=null!=(l=d(n,"release_date")||(null!=t?d(t,"release_date"):t))?l:o)===c?l.call(s,{name:"release_date",hash:{},data:i,loc:{start:{line:8,column:48},end:{line:8,column:64}}}):l)+"</p>\n            <span class='films__rating'>"+r(typeof(l=null!=(l=d(n,"vote_average")||(null!=t?d(t,"vote_average"):t))?l:o)===c?l.call(s,{name:"vote_average",hash:{},data:i,loc:{start:{line:9,column:40},end:{line:9,column:56}}}):l)+"</span>\n        </div>      \n    </div>\n</li>"},useData:!0}),u=i("2ST4D");const m=(0,(r=i("31u3U")).getLocalStorage)("favouriteMovies"),f=Object.values(m);function v(){const e={};f.forEach((t=>{e[t.id]?e[t.id]=e[t.id]+1:e[t.id]=1}));const t=Object.entries(e).sort(((e,t)=>t[1]-e[1])),n=[];return t.forEach((e=>n.push(Number(e[0])))),n.slice(0,3).join(", ")}var p=i("04jNI"),L=i("hfgIj");i("2nhTy");var h=i("1vg23");i("4S0r6"),i("lo17Q");const g=document.querySelector("[data-watched]"),y=document.querySelector("[data-queue]"),_=document.querySelector("[data-fav]"),w=document.querySelector(".recom"),S=document.querySelector(".films"),q=document.querySelector("#js-film-modal");g.addEventListener("click",(function(){y.classList.remove("is-active"),_.classList.remove("is-active"),g.classList.add("is-active"),w.classList.contains("visually-hidden")||w.classList.add("visually-hidden");T("watchedList"),(0,r.setLocalStorage)("selectedList","watched")})),y.addEventListener("click",(function(){g.classList.remove("is-active"),_.classList.remove("is-active"),y.classList.add("is-active"),w.classList.contains("visually-hidden")||w.classList.add("visually-hidden");T("queueList"),(0,r.setLocalStorage)("selectedList","queue")})),_.addEventListener("click",(async function(){try{(0,r.setLocalStorage)("selectedList","fav"),S.innerHTML="",g.classList.remove("is-active"),y.classList.remove("is-active"),_.classList.add("is-active");const t=v();if(!t.length)return void e(l).Notify.failure("We don't have any recomendations for you :(");w.classList.remove("visually-hidden"),(0,p.spinnerPlay)();const{results:n,total_results:a}=await E.getFavMovies(t),i=await(0,L.default)(n),s=(0,h.createMarkUp)(i);S.insertAdjacentHTML("beforeend",s)}catch(t){e(l).Notify.failure(t.message)}finally{(0,p.spinnerStop)()}})),S.addEventListener("click",(async function(t){try{if("UL"===t.target.nodeName)return;const n=(0,r.getLocalStorage)("selectedList"),a=t.target.closest("li");let i=a.dataset.id;E.idFilm=i;const s=await E.getFilmByID();let d=(await E.getTrailerById()).results;const m=function(t){if(t)return`https://www.youtube.com/embed/${t.key}`;e(l).Notify.failure("Oops! Trailer did not find...")}(d.map((e=>e)).find((e=>e.name.includes("Trailer")||e.name))),f=(0,c.default)(s);f.movie=m;const v=(0,o.default)(f);q.innerHTML=v,q.classList.remove("is-hidden");let p=document.querySelector(".trailerShow"),L=document.querySelector(".hidden");p.addEventListener("click",(function(){L.classList.toggle("trailer__youtube")})),f.movie||(p.disabled=!0);let h=document.querySelector('[data-name="watched"]'),g=document.querySelector('[data-name="queue"]');h.textContent="REMOVE","queue"===n&&(g.textContent="ADD TO WATCHED");const y=e=>{b("watched"===n?"watchedList":"queueList",i,a)},_=e=>{"queue"===n?((0,u.default)("watchedList",i,f),b("queueList",i,a)):((0,u.default)("queueList",i,f),b("watchedList",i,a))};q.addEventListener("click",M),document.addEventListener("keydown",N),h.addEventListener("click",y),g.addEventListener("click",_)}catch(t){e(l).Notify.failure(t.message)}}));const E=new(0,s.default);function b(e,t,n){const a=(0,r.getLocalStorage)(e),i=a.findIndex((e=>e.id===Number(t)));a.splice(i,1),(0,r.setLocalStorage)(e,a),k(),n.remove()}function T(t){S.innerHTML="";const n=(0,r.getLocalStorage)(t);n.length||e(l).Notify.failure("The list is empty.");const a=n.map((e=>d(e))).join("");S.insertAdjacentHTML("beforeend",a)}function k(){q.innerHTML="",q.classList.add("is-hidden"),document.removeEventListener("keydown",N),q.removeEventListener("click",M)}function N(e){"Escape"===e.code&&k()}function M(e){"path"!==e.target.nodeName&&"svg"!==e.target.nodeName||k(),e.target===e.currentTarget&&k()}
//# sourceMappingURL=library.f52871c9.js.map
