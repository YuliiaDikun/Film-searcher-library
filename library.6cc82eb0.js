function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},l=t.parcelRequire216a;null==l&&((l=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var l={id:e,exports:{}};return n[e]=l,t.call(l.exports,l,l.exports),l.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequire216a=l);var i=l("eWCmQ"),s=l("9Bkxl"),o=l("eXQeU"),c=l("6Jpgb"),r=l("31u3U");var d=e(l("amrNH")).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,l){var i,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,c="function",r=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<li class='films__item' data-id="+r(typeof(i=null!=(i=d(n,"id")||(null!=t?d(t,"id"):t))?i:o)===c?i.call(s,{name:"id",hash:{},data:l,loc:{start:{line:1,column:32},end:{line:1,column:38}}}):i)+">\n    <div class='films__img'>\n        <img src='https://image.tmdb.org/t/p/w500"+r(typeof(i=null!=(i=d(n,"poster_path")||(null!=t?d(t,"poster_path"):t))?i:o)===c?i.call(s,{name:"poster_path",hash:{},data:l,loc:{start:{line:3,column:49},end:{line:3,column:64}}}):i)+"' alt="+r(typeof(i=null!=(i=d(n,"original_title")||(null!=t?d(t,"original_title"):t))?i:o)===c?i.call(s,{name:"original_title",hash:{},data:l,loc:{start:{line:3,column:70},end:{line:3,column:88}}}):i)+" loading='lazy' />\n    </div>\n    <div class='films__description'>\n        <p class='films__name'>"+r(typeof(i=null!=(i=d(n,"title")||(null!=t?d(t,"title"):t))?i:o)===c?i.call(s,{name:"title",hash:{},data:l,loc:{start:{line:6,column:31},end:{line:6,column:40}}}):i)+"</p>\n        <div class=\"films__container\">\n            <p class='films__info'>"+r(typeof(i=null!=(i=d(n,"genres")||(null!=t?d(t,"genres"):t))?i:o)===c?i.call(s,{name:"genres",hash:{},data:l,loc:{start:{line:8,column:35},end:{line:8,column:45}}}):i)+" | "+r(typeof(i=null!=(i=d(n,"release_date")||(null!=t?d(t,"release_date"):t))?i:o)===c?i.call(s,{name:"release_date",hash:{},data:l,loc:{start:{line:8,column:48},end:{line:8,column:64}}}):i)+"</p>\n            <span class='films__rating'>"+r(typeof(i=null!=(i=d(n,"vote_average")||(null!=t?d(t,"vote_average"):t))?i:o)===c?i.call(s,{name:"vote_average",hash:{},data:l,loc:{start:{line:9,column:40},end:{line:9,column:56}}}):i)+"</span>\n        </div>      \n    </div>\n</li>"},useData:!0}),u=l("2ST4D");const m=(0,(r=l("31u3U")).getLocalStorage)("favouriteMovies"),f=Object.values(m);function v(){const e={};f.forEach((t=>{e[t.id]?e[t.id]=e[t.id]+1:e[t.id]=1}));const t=Object.entries(e).sort(((e,t)=>t[1]-e[1])),n=[];return t.forEach((e=>n.push(Number(e[0])))),n.slice(0,3).join(", ")}var p=l("04jNI"),g=l("hfgIj");l("2nhTy");var L=l("1vg23");l("4S0r6"),l("lo17Q");const h=document.querySelector("[data-watched]"),y=document.querySelector("[data-queue]"),_=document.querySelector("[data-fav]"),w=document.querySelector(".recom"),S=document.querySelector(".films"),q=document.querySelector("#js-film-modal");h.addEventListener("click",(function(){y.classList.remove("is-active"),_.classList.remove("is-active"),h.classList.add("is-active"),b("watchedList"),(0,r.setLocalStorage)("selectedList","watched")})),y.addEventListener("click",(function(){h.classList.remove("is-active"),_.classList.remove("is-active"),y.classList.add("is-active"),b("queueList"),(0,r.setLocalStorage)("selectedList","queue")})),_.addEventListener("click",(async function(){try{(0,r.setLocalStorage)("selectedList","fav"),S.innerHTML="",h.classList.remove("is-active"),y.classList.remove("is-active"),_.classList.add("is-active");const t=v();if(!t.length)return void e(i).Notify.failure("We don't have any recomendations for you :(");w.classList.remove("visually-hidden"),(0,p.spinnerPlay)();const{results:n,total_results:a}=await E.getFavMovies(t),l=await(0,g.default)(n),s=(0,L.createMarkUp)(l);S.insertAdjacentHTML("beforeend",s)}catch(t){e(i).Notify.failure(t.message)}finally{(0,p.spinnerStop)()}})),S.addEventListener("click",(async function(t){try{if("UL"===t.target.nodeName)return;const n=(0,r.getLocalStorage)("selectedList"),a=t.target.closest("li");let l=a.dataset.id;E.idFilm=l;const s=await E.getFilmByID();let d=(await E.getTrailerById()).results;const m=function(t){if(t)return`https://www.youtube.com/embed/${t.key}`;e(i).Notify.failure("Oops! Trailer did not find...")}(d.map((e=>e)).find((e=>e.name.includes("Trailer")||e.name))),f=(0,c.default)(s);f.movie=m;const v=(0,o.default)(f);q.innerHTML=v,q.classList.remove("is-hidden");let p=document.querySelector(".trailerShow"),g=document.querySelector(".hidden");p.addEventListener("click",(()=>{g.classList.toggle("trailer__youtube")}));let L=document.querySelector('[data-name="watched"]'),h=document.querySelector('[data-name="queue"]');L.textContent="REMOVE","queue"===n&&(h.textContent="ADD TO WATCHED");const y=e=>{T("watched"===n?"watchedList":"queueList",l,a)},_=e=>{"queue"===n?((0,u.default)("watchedList",l,f),T("queueList",l,a)):((0,u.default)("queueList",l,f),T("watchedList",l,a))};q.addEventListener("click",M),document.addEventListener("keydown",N),L.addEventListener("click",y),h.addEventListener("click",_)}catch(t){e(i).Notify.failure(t.message)}}));const E=new(0,s.default);function T(e,t,n){const a=(0,r.getLocalStorage)(e),l=a.findIndex((e=>e.id===Number(t)));a.splice(l,1),(0,r.setLocalStorage)(e,a),k(),n.remove()}function b(t){S.innerHTML="";const n=(0,r.getLocalStorage)(t);n.length||e(i).Notify.failure("The list is empty.");const a=n.map((e=>d(e))).join("");S.insertAdjacentHTML("beforeend",a)}function k(){q.innerHTML="",q.classList.add("is-hidden"),document.removeEventListener("keydown",N),q.removeEventListener("click",M)}function N(e){"Escape"===e.code&&k()}function M(e){"path"!==e.target.nodeName&&"svg"!==e.target.nodeName||k(),e.target===e.currentTarget&&k()}
//# sourceMappingURL=library.6cc82eb0.js.map
